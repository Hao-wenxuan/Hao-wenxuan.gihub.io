<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>[计算机基础]ban门弄fool-一些常用的工具 | 小二上馄饨的Mo01iHt-Blog</title><meta name="keywords" content="tools"><meta name="author" content="Mo01iHt"><meta name="copyright" content="Mo01iHt"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="放一些常用工具的使用教程">
<meta property="og:type" content="article">
<meta property="og:title" content="[计算机基础]ban门弄fool-一些常用的工具">
<meta property="og:url" content="https://blog.mo01iht.top/article/b0d9110f/index.html">
<meta property="og:site_name" content="小二上馄饨的Mo01iHt-Blog">
<meta property="og:description" content="放一些常用工具的使用教程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://files.catbox.moe/ij1edm.png">
<meta property="article:published_time" content="2022-11-21T03:01:03.000Z">
<meta property="article:modified_time" content="2023-05-28T15:47:46.380Z">
<meta property="article:author" content="Mo01iHt">
<meta property="article:tag" content="tools">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://files.catbox.moe/ij1edm.png"><link rel="shortcut icon" href="https://image-host-mooliht.oss-cn-beijing.aliyuncs.com/img/3285303_astronomy_galaxy_planets_solar_space_icon.png"><link rel="canonical" href="https://blog.mo01iht.top/article/b0d9110f/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '[计算机基础]ban门弄fool-一些常用的工具',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-28 23:47:46'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="http://image-host-mooliht.oss-cn-beijing.aliyuncs.com/img/image-20230611192757440.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 小屋子</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://files.catbox.moe/ij1edm.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小二上馄饨的Mo01iHt-Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 小屋子</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">[计算机基础]ban门弄fool-一些常用的工具</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-21T03:01:03.000Z" title="发表于 2022-11-21 11:01:03">2022-11-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-28T15:47:46.380Z" title="更新于 2023-05-28 23:47:46">2023-05-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="[计算机基础]ban门弄fool-一些常用的工具"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="pwndbggdb">pwndbg(GDB)</h1>
<h2 id="gdb简记">gdb简记</h2>
<h3 id="传送门">传送门</h3>
<p><font size="4">官网：<a target="_blank" rel="noopener" href="http://www.sourceware.org/gdb/">GDB: The
GNU Project Debugger (sourceware.org)</a></font></p>
<p>百科：<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/gdb/10869514?fr=aladdin">gdb_百度百科
(baidu.com)</a></p>
<p>教程大全：<a target="_blank" rel="noopener" href="https://blog.csdn.net/kangkanglhb88008/article/details/127155083">gdb入门教程大全（清晰明了）_我是标同学的博客-CSDN博客_gdb
教程</a></p>
<p><font size="5">声音超甜</font>的b站教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1EK411g7Li/?spm_id_from=333.337.search-card.all.click&amp;vd_source=7f553078c1aeb5b58ec0305625bc85c8">【小神仙讲
GDB】 通俗易懂版教程 | 一小时入门GDB | Debug | c/c++程序员必备 |
佩雨小神仙 _哔哩哔哩_bilibili</a></p>
<p>知乎：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/74897601">GDB调试入门指南
- 知乎 (zhihu.com)</a></p>
<h3 id="啥是个gdb">啥是个gdb</h3>
<p><img src="/article/b0d9110f/img1.png" alt="Summary of GDB"></p>
<p>GDB可以做四种主要的事情(加上支持这些事情的其他事情)来帮助您捕获bug:</p>
<p>•启动你的程序，指定任何可能影响它行为的东西。</p>
<p>•让你的程序在特定条件下停止。</p>
<p>•当你的程序停止时，检查发生了什么。</p>
<p>•修改程序中的内容，这样你就可以尝试纠正一个错误的影响，并继续学习另一个错误。</p>
<h3 id="咋配置gdb">咋配置gdb</h3>
<p>安装gdb并检查是否成功安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yum install gdb</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gdb --version</span></span><br></pre></td></tr></table></figure>
<p><code>GNU gdb (Ubuntu 9.2-0ubuntu1~20.04.1) 9.2 Copyright (C) 2020 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law.</code></p>
<p><font size="6">装起来了</font></p>
<h3 id="说明">说明</h3>
<p>因为之前一些工作需要逆向，所以我直接下载的是<strong>pwndbg</strong>，pwndbg专门针对pwn题调试添加了额外的功能。</p>
<p>就是说，是个gdb的插件，用来进行逆向工程调试的。</p>
<p>如下是pwndbg的安装命令：</p>
<p><code>$ git clone https://github.com/pwndbg/pwndbg</code></p>
<p><code>$ cd pwndbg</code></p>
<p><code>$ ./setup.sh</code></p>
<p>当然，如果只是debug的话，gdb足够，且装了pwndbg之后进行gdb，命令没有变化，只是会在gdb基础上展示出逆向进程。</p>
<p>在此附说明是因为：<font size="5">下述示例中的展示皆基于pwndbg插件下的gdb。</font></p>
<h2 id="quickstart">quickstart</h2>
<p>先vim一个简单的c程序</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> arr[<span class="number">4</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>gcc编译<code>gcc -g start.c</code>，通过gdb进入./a.out执行文件<code>gdb ./a.out</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gcc -g start.c</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gdb ./a.out</span></span><br><span class="line">GNU gdb (Ubuntu 9.2-0ubuntu1~20.04.1) 9.2</span><br><span class="line">Copyright (C) 2020 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line">Type &quot;show copying&quot; and &quot;show warranty&quot; for details.</span><br><span class="line">This GDB was configured as &quot;x86_64-linux-gnu&quot;.</span><br><span class="line">Type &quot;show configuration&quot; for configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line"></span><br><span class="line">For help, type &quot;help&quot;.</span><br><span class="line">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...</span><br><span class="line">pwndbg: loaded 197 commands. Type pwndbg [filter] for a list.</span><br><span class="line">pwndbg: created $rebase, $ida gdb functions (can be used with print/break)</span><br><span class="line">Reading symbols from ./a.out...</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span></span><br></pre></td></tr></table></figure>
<p>如此进入到gdb指令交互。</p>
<h2 id="gdb指令">gdb指令</h2>
<h3 id="男人一下">男人一下</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">man gdb</span></span><br></pre></td></tr></table></figure>
<p>Here are some of the most frequently needed GDB commands:</p>
<ul>
<li><p><strong>break</strong> [file:]function Set a breakpoint at
function (in file).</p></li>
<li><p><strong>run</strong> [arglist] Start your program (with arglist,
if specified).</p></li>
<li><p><strong>bt</strong> Backtrace: display the program
stack.</p></li>
<li><p><strong>print</strong> expr Display the value of an
expression.</p></li>
<li><p><strong>c</strong> Continue running your program (after stopping,
e.g. at a breakpoint).</p></li>
<li><p><strong>next</strong> Execute next program line (after stopping);
step over any function calls in the line.</p></li>
<li><p><strong>list</strong> [file:]function type the text of the
program in the vicinity of where it is presently stopped.</p></li>
<li><p><strong>step</strong> Execute next program line (after stopping);
step into any function calls in the line.</p></li>
<li><p><strong>help</strong> [name] Show information about GDB command
name, or general information about using GDB.</p></li>
<li><p><strong>quit</strong> Exit from GDB.</p></li>
</ul>
<h3 id="基本命令应用">基本命令应用</h3>
<h4 id="rrun-润">r/run: 润</h4>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">r</span></span><br><span class="line">Starting program: /home/Mo01iHt/Desktop/a.out </span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">[Inferior 1 (process 134817) exited normally]</span><br></pre></td></tr></table></figure>
<h4 id="bbreak-打断点">b/break: 打断点</h4>
<h5 id="b-函数名字"><code>b 函数名字</code></h5>
<p>在函数处装b（指打断点：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b main</span></span><br><span class="line">Breakpoint 1 at 0x555555555169: file start.c, line 3.</span><br></pre></td></tr></table></figure>
<h5 id="b-行号"><code>b 行号</code></h5>
<p>可搭配<code>list</code>指令（查看源代码），查看代码对应行数，在对应行装b</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">list</span></span><br><span class="line">1	#include &lt;stdio.h&gt;</span><br><span class="line">2	</span><br><span class="line">3	int main()&#123;</span><br><span class="line">4		int arr[4] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">5		for (int i=0;i&lt;4;i++)</span><br><span class="line">6		&#123;</span><br><span class="line">7			printf(&quot;%d\n&quot;, arr[i]);</span><br><span class="line">8		&#125;</span><br><span class="line">9		return 0;</span><br><span class="line">10	&#125;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b 7</span></span><br><span class="line">Breakpoint 2 at 0x5555555551a9: file start.c, line 7.</span><br></pre></td></tr></table></figure>
<h5 id="info-b-康康刚在哪装了b"><code>info b</code>:
康康刚在哪装了b</h5>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">info b</span></span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x0000555555555169 in main at start.c:3</span><br><span class="line">2       breakpoint     keep y   0x00005555555551a9 in main at start.c:7</span><br></pre></td></tr></table></figure>
<p>润一下<code>r</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">r</span></span><br><span class="line">Starting program: /home/Mo01iHt/Desktop/a.out </span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at start.c:3</span><br><span class="line">3	int main()&#123;</span><br><span class="line">LEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA</span><br><span class="line">───────────────────────────────────────[ REGISTERS ]───────────────────────────────────────</span><br><span class="line"> RAX  0x555555555169 (main) ◂— endbr64 </span><br><span class="line"> RBX  0x5555555551f0 (__libc_csu_init) ◂— endbr64 </span><br><span class="line"> RCX  0x5555555551f0 (__libc_csu_init) ◂— endbr64 </span><br><span class="line"> RDX  0x7fffffffdf68 —▸ 0x7fffffffe2e3 ◂— &#x27;SHELL=/bin/bash&#x27;</span><br><span class="line"> RDI  0x1</span><br><span class="line"> RSI  0x7fffffffdf58 —▸ 0x7fffffffe2c4 ◂— &#x27;/home/Mo01iHt/Desktop/a.out&#x27;</span><br><span class="line"> R8   0x0</span><br><span class="line"> R9   0x7ffff7fe0d60 (_dl_fini) ◂— endbr64 </span><br><span class="line"> R10  0x0</span><br><span class="line"> R11  0x7ffff7f6c7c0 (intel_02_known) ◂— 0x200000200406</span><br><span class="line"> R12  0x555555555080 (_start) ◂— endbr64 </span><br><span class="line"> R13  0x7fffffffdf50 ◂— 0x1</span><br><span class="line"> R14  0x0</span><br><span class="line"> R15  0x0</span><br><span class="line"> RBP  0x0</span><br><span class="line"> RSP  0x7fffffffde68 —▸ 0x7ffff7de1083 (__libc_start_main+243) ◂— mov    edi, eax</span><br><span class="line"> RIP  0x555555555169 (main) ◂— endbr64 </span><br><span class="line">────────────────────────────────────────[ DISASM ]─────────────────────────────────────────</span><br><span class="line"> ► 0x555555555169 &lt;main&gt;       endbr64 </span><br><span class="line">   0x55555555516d &lt;main+4&gt;     push   rbp</span><br><span class="line">   0x55555555516e &lt;main+5&gt;     mov    rbp, rsp</span><br><span class="line">   0x555555555171 &lt;main+8&gt;     sub    rsp, 0x30</span><br><span class="line">   0x555555555175 &lt;main+12&gt;    mov    rax, qword ptr fs:[0x28]</span><br><span class="line">   0x55555555517e &lt;main+21&gt;    mov    qword ptr [rbp - 8], rax</span><br><span class="line">   0x555555555182 &lt;main+25&gt;    xor    eax, eax</span><br><span class="line">   0x555555555184 &lt;main+27&gt;    mov    dword ptr [rbp - 0x20], 1</span><br><span class="line">   0x55555555518b &lt;main+34&gt;    mov    dword ptr [rbp - 0x1c], 2</span><br><span class="line">   0x555555555192 &lt;main+41&gt;    mov    dword ptr [rbp - 0x18], 3</span><br><span class="line">   0x555555555199 &lt;main+48&gt;    mov    dword ptr [rbp - 0x14], 4</span><br><span class="line">─────────────────────────────────────[ SOURCE (CODE) ]─────────────────────────────────────</span><br><span class="line">In file: /home/Mo01iHt/Desktop/start.c</span><br><span class="line">   1 #include &lt;stdio.h&gt;</span><br><span class="line">   2 </span><br><span class="line"> ► 3 int main()&#123;</span><br><span class="line">   4 	int arr[4] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">   5 	for (int i=0;i&lt;4;i++)</span><br><span class="line">   6 	&#123;</span><br><span class="line">   7 		printf(&quot;%d\n&quot;, arr[i]);</span><br><span class="line">   8 	&#125;</span><br><span class="line">─────────────────────────────────────────[ STACK ]─────────────────────────────────────────</span><br><span class="line">00:0000│ rsp 0x7fffffffde68 —▸ 0x7ffff7de1083 (__libc_start_main+243) ◂— mov    edi, eax</span><br><span class="line">01:0008│     0x7fffffffde70 —▸ 0x7ffff7ffc620 (_rtld_global_ro) ◂— 0x50f3c00000000</span><br><span class="line">02:0010│     0x7fffffffde78 —▸ 0x7fffffffdf58 —▸ 0x7fffffffe2c4 ◂— &#x27;/home/Mo01iHt/Desktop/a.out&#x27;</span><br><span class="line">03:0018│     0x7fffffffde80 ◂— 0x100000000</span><br><span class="line">04:0020│     0x7fffffffde88 —▸ 0x555555555169 (main) ◂— endbr64 </span><br><span class="line">05:0028│     0x7fffffffde90 —▸ 0x5555555551f0 (__libc_csu_init) ◂— endbr64 </span><br><span class="line">06:0030│     0x7fffffffde98 ◂— 0x457649a3c538cc92</span><br><span class="line">07:0038│     0x7fffffffdea0 —▸ 0x555555555080 (_start) ◂— endbr64 </span><br><span class="line">───────────────────────────────────────[ BACKTRACE ]───────────────────────────────────────</span><br><span class="line"> ► f 0   0x555555555169 main</span><br><span class="line">   f 1   0x7ffff7de1083 __libc_start_main+243</span><br><span class="line">───────────────────────────────────────────────────────────────────────────────────────────</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="nnext-单步运行">n/next: 单步运行</h4>
<h4 id="pprint-打印变量值">p/print: 打印变量值</h4>
<p>在<strong>调试</strong>过程中打印出目标的值。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p arr[0]</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">1 = 0</span></span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p &amp;arr[0]</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">2 = (int *) 0x7fffffffde40</span></span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p &amp;arr[1]</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">3 = (int *) 0x7fffffffde44</span></span><br></pre></td></tr></table></figure>
<p>显然验证整型数组每个元素占1word，即4bits</p>
<h5 id="no-symbol-xxx-in-current-context-的解决">No symbol "xxx" in
current context 的解决</h5>
<p>在进行gdb调试时（包括使用core dump文件调试），经常出现GDB No symbol
“xxx” in current context问题，常见的原因如下：</p>
<p>使用gcc编译的时候未使用-g选项。或者加了-g选项，同时使用了-o选项。建议编译的时候使用-g选项的时候，同时使用-Og可以关闭编译优化（-O选项较低gcc版本不支持）。</p>
<p><font size="1"><a target="_blank" rel="noopener" href="https://blog.csdn.net/sj_djw/article/details/91958035">出现GDB No
symbol "xxx" in current context的几种原因分析_春日绿野的博客-CSDN博客_no
symbol in current context</a></font></p>
<h4 id="sstep-步入函数">s/step: 步入函数</h4>
<p>为了方便引例：<code>cp start.c start1.c</code>
提醒自己要有备份文件的习惯 ~~(rm -rf /*~~</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;hello echo~\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="type">int</span> arr[<span class="number">4</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	hello();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>进入gdb进行debug，并在对hello()函数的引用处打断点：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">list</span></span><br><span class="line">11			printf(&quot;%d\n&quot;, arr[i]);</span><br><span class="line">12		&#125;</span><br><span class="line">13		hello();</span><br><span class="line">14		return 0;</span><br><span class="line">15	&#125;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b 13</span></span><br><span class="line">Breakpoint 1 at 0x555555555206: file start1.c, line 13.</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">r</span></span><br><span class="line">Starting program: /home/Mo01iHt/Desktop/a.out </span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at start1.c:13</span><br><span class="line">13		hello();</span><br><span class="line">LEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA</span><br><span class="line">───────────────────────────────────────[ REGISTERS ]───────────────────────────────────────</span><br><span class="line"> RAX  0x2</span><br><span class="line"> RBX  0x555555555230 (__libc_csu_init) ◂— endbr64 </span><br><span class="line"> RCX  0x0</span><br><span class="line"> RDX  0x0</span><br><span class="line"> RDI  0x7ffff7fab7e0 (_IO_stdfile_1_lock) ◂— 0x0</span><br><span class="line"> RSI  0x5555555592a0 ◂— 0xa34 /* &#x27;4\n&#x27; */</span><br><span class="line"> R8   0x0</span><br><span class="line"> R9   0x2</span><br><span class="line"> R10  0x555555556012 ◂— 0x483b031b01000a /* &#x27;\n&#x27; */</span><br><span class="line"> R11  0x246</span><br><span class="line"> R12  0x5555555550a0 (_start) ◂— endbr64 </span><br><span class="line"> R13  0x7fffffffdf50 ◂— 0x1</span><br><span class="line"> R14  0x0</span><br><span class="line"> R15  0x0</span><br><span class="line"> RBP  0x7fffffffde60 ◂— 0x0</span><br><span class="line"> RSP  0x7fffffffde30 —▸ 0x7ffff7fae2e8 (__exit_funcs_lock) ◂— 0x0</span><br><span class="line"> RIP  0x555555555206 (main+102) ◂— mov    eax, 0</span><br><span class="line">────────────────────────────────────────[ DISASM ]─────────────────────────────────────────</span><br><span class="line"> ► 0x555555555206 &lt;main+102&gt;           mov    eax, 0</span><br><span class="line">   0x55555555520b &lt;main+107&gt;           call   hello                &lt;hello&gt;</span><br><span class="line"> </span><br><span class="line">   0x555555555210 &lt;main+112&gt;           mov    eax, 0</span><br><span class="line">   0x555555555215 &lt;main+117&gt;           mov    rdx, qword ptr [rbp - 8]</span><br><span class="line">   0x555555555219 &lt;main+121&gt;           xor    rdx, qword ptr fs:[0x28]</span><br><span class="line">   0x555555555222 &lt;main+130&gt;           je     main+137                &lt;main+137&gt;</span><br><span class="line"> </span><br><span class="line">   0x555555555224 &lt;main+132&gt;           call   __stack_chk_fail@plt                &lt;__stack_chk_fail@plt&gt;</span><br><span class="line"> </span><br><span class="line">   0x555555555229 &lt;main+137&gt;           leave  </span><br><span class="line">   0x55555555522a &lt;main+138&gt;           ret    </span><br><span class="line"> </span><br><span class="line">   0x55555555522b                      nop    dword ptr [rax + rax]</span><br><span class="line">   0x555555555230 &lt;__libc_csu_init&gt;    endbr64 </span><br><span class="line">─────────────────────────────────────[ SOURCE (CODE) ]─────────────────────────────────────</span><br><span class="line">In file: /home/Mo01iHt/Desktop/start1.c</span><br><span class="line">    8 	int arr[4] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">    9 	for (int i=0;i&lt;4;i++)</span><br><span class="line">   10 	&#123;</span><br><span class="line">   11 		printf(&quot;%d\n&quot;, arr[i]);</span><br><span class="line">   12 	&#125;</span><br><span class="line"> ► 13 	hello();</span><br><span class="line">   14 	return 0;</span><br><span class="line">   15 &#125;</span><br><span class="line">─────────────────────────────────────────[ STACK ]─────────────────────────────────────────</span><br><span class="line">00:0000│ rsp 0x7fffffffde30 —▸ 0x7ffff7fae2e8 (__exit_funcs_lock) ◂— 0x0</span><br><span class="line">01:0008│     0x7fffffffde38 ◂— 0x455555230</span><br><span class="line">02:0010│     0x7fffffffde40 ◂— 0x200000001</span><br><span class="line">03:0018│     0x7fffffffde48 ◂— 0x400000003</span><br><span class="line">04:0020│     0x7fffffffde50 —▸ 0x7fffffffdf50 ◂— 0x1</span><br><span class="line">05:0028│     0x7fffffffde58 ◂— 0x8fee5fb1f1bbc000</span><br><span class="line">06:0030│ rbp 0x7fffffffde60 ◂— 0x0</span><br><span class="line">07:0038│     0x7fffffffde68 —▸ 0x7ffff7de1083 (__libc_start_main+243) ◂— mov    edi, eax</span><br><span class="line">───────────────────────────────────────[ BACKTRACE ]───────────────────────────────────────</span><br><span class="line"> ► f 0   0x555555555206 main+102</span><br><span class="line">   f 1   0x7ffff7de1083 __libc_start_main+243</span><br><span class="line">───────────────────────────────────────────────────────────────────────────────────────────</span><br></pre></td></tr></table></figure>
<p>一个<code>s</code>步入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">s</span></span><br><span class="line">hello () at start1.c:3</span><br><span class="line">3	void hello()&#123;</span><br><span class="line">LEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA</span><br><span class="line">───────────────────────────────────────[ REGISTERS ]───────────────────────────────────────</span><br><span class="line">*RAX  0x0</span><br><span class="line"> RBX  0x555555555230 (__libc_csu_init) ◂— endbr64 </span><br><span class="line"> RCX  0x0</span><br><span class="line"> RDX  0x0</span><br><span class="line"> RDI  0x7ffff7fab7e0 (_IO_stdfile_1_lock) ◂— 0x0</span><br><span class="line"> RSI  0x5555555592a0 ◂— 0xa34 /* &#x27;4\n&#x27; */</span><br><span class="line"> R8   0x0</span><br><span class="line"> R9   0x2</span><br><span class="line"> R10  0x555555556012 ◂— 0x483b031b01000a /* &#x27;\n&#x27; */</span><br><span class="line"> R11  0x246</span><br><span class="line"> R12  0x5555555550a0 (_start) ◂— endbr64 </span><br><span class="line"> R13  0x7fffffffdf50 ◂— 0x1</span><br><span class="line"> R14  0x0</span><br><span class="line"> R15  0x0</span><br><span class="line"> RBP  0x7fffffffde60 ◂— 0x0</span><br><span class="line">*RSP  0x7fffffffde28 —▸ 0x555555555210 (main+112) ◂— mov    eax, 0</span><br><span class="line">*RIP  0x555555555189 (hello) ◂— endbr64 </span><br><span class="line">────────────────────────────────────────[ DISASM ]─────────────────────────────────────────</span><br><span class="line"> ► 0x555555555189 &lt;hello&gt;       endbr64 </span><br><span class="line">   0x55555555518d &lt;hello+4&gt;     push   rbp</span><br><span class="line">   0x55555555518e &lt;hello+5&gt;     mov    rbp, rsp</span><br><span class="line">   0x555555555191 &lt;hello+8&gt;     lea    rdi, [rip + 0xe6c]</span><br><span class="line">   0x555555555198 &lt;hello+15&gt;    call   puts@plt                &lt;puts@plt&gt;</span><br><span class="line"> </span><br><span class="line">   0x55555555519d &lt;hello+20&gt;    nop    </span><br><span class="line">   0x55555555519e &lt;hello+21&gt;    pop    rbp</span><br><span class="line">   0x55555555519f &lt;hello+22&gt;    ret    </span><br><span class="line"> </span><br><span class="line">   0x5555555551a0 &lt;main&gt;        endbr64 </span><br><span class="line">   0x5555555551a4 &lt;main+4&gt;      push   rbp</span><br><span class="line">   0x5555555551a5 &lt;main+5&gt;      mov    rbp, rsp</span><br><span class="line">─────────────────────────────────────[ SOURCE (CODE) ]─────────────────────────────────────</span><br><span class="line">In file: /home/Mo01iHt/Desktop/start1.c</span><br><span class="line">   1 #include &lt;stdio.h&gt;</span><br><span class="line">   2 </span><br><span class="line"> ► 3 void hello()&#123;</span><br><span class="line">   4 	printf(&quot;hello echo~\n&quot;);</span><br><span class="line">   5 &#125;</span><br><span class="line">   6 </span><br><span class="line">   7 int main()&#123;</span><br><span class="line">   8 	int arr[4] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">─────────────────────────────────────────[ STACK ]─────────────────────────────────────────</span><br><span class="line">00:0000│ rsp 0x7fffffffde28 —▸ 0x555555555210 (main+112) ◂— mov    eax, 0</span><br><span class="line">01:0008│     0x7fffffffde30 —▸ 0x7ffff7fae2e8 (__exit_funcs_lock) ◂— 0x0</span><br><span class="line">02:0010│     0x7fffffffde38 ◂— 0x455555230</span><br><span class="line">03:0018│     0x7fffffffde40 ◂— 0x200000001</span><br><span class="line">04:0020│     0x7fffffffde48 ◂— 0x400000003</span><br><span class="line">05:0028│     0x7fffffffde50 —▸ 0x7fffffffdf50 ◂— 0x1</span><br><span class="line">06:0030│     0x7fffffffde58 ◂— 0x8fee5fb1f1bbc000</span><br><span class="line">07:0038│ rbp 0x7fffffffde60 ◂— 0x0</span><br><span class="line">───────────────────────────────────────[ BACKTRACE ]───────────────────────────────────────</span><br><span class="line"> ► f 0   0x555555555189 hello</span><br><span class="line">   f 1   0x555555555210 main+112</span><br><span class="line">   f 2   0x7ffff7de1083 __libc_start_main+243</span><br><span class="line">───────────────────────────────────────────────────────────────────────────────────────────</span><br></pre></td></tr></table></figure>
<p>可以看到步入到了hello()函数处</p>
<h4 id="ccontinue-继续执行到下一个断点">c/continue:
继续执行到下一个断点</h4>
<p>我们可能打了多处断点，或者断点打在循环内，这个时候，想跳过这个断点，甚至跳过多次断点继续执行该怎么做呢？可以使用continue命令（可简写为c）或者fg，它会继续执行程序，直到再次遇到断点处：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b main</span></span><br><span class="line">Breakpoint 1 at 0x1169: file start.c, line 3.</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b 7</span></span><br><span class="line">Breakpoint 2 at 0x11a9: file start.c, line 7.</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">r</span></span><br><span class="line">Starting program: /home/Mo01iHt/Desktop/a.out </span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at start.c:3</span><br><span class="line">3	int main()&#123;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">c  <span class="comment">#继续运行，直到下一次断住</span></span></span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 2, main () at start.c:7</span><br><span class="line">7			printf(&quot;%d\n&quot;, arr[i]);</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">c 3  <span class="comment">#跳过三次</span></span></span><br><span class="line">Will ignore next 2 crossings of breakpoint 2.  Continuing.</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">Breakpoint 2, main () at start.c:7</span><br><span class="line">7			printf(&quot;%d\n&quot;, arr[i]);</span><br></pre></td></tr></table></figure>
<h4 id="uuntil-继续运行到指定位置">u/until: 继续运行到指定位置</h4>
<p>例如我们在main函数起始处打断停住，想要运行到第9行时再次停住，则：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b main</span></span><br><span class="line">Breakpoint 1 at 0x1169: file start.c, line 3.</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">r</span></span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">until 9</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line"></span><br><span class="line">main () at start.c:9</span><br><span class="line">9		return 0;</span><br></pre></td></tr></table></figure>
<h2 id="gdb一些骚操作">gdb一些骚操作</h2>
<h3 id="允许执行终端命令-shell-xxx">允许执行终端命令: shell xxx</h3>
<p>例如<code>shell cat start.c</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">shell <span class="built_in">cat</span> start.c</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">include &lt;stdio.h&gt;</span></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">	int arr[4] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">	for (int i=0;i&lt;4;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		printf(&quot;%d\n&quot;, arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="日志功能-set-logging-on">日志功能: set logging on</h3>
<p>可以生成一个.txt文档记录输出日志</p>
<p>如执行如下命令<code>set logging in</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash"><span class="built_in">set</span> logging on</span></span><br><span class="line">Copying output to gdb.txt.</span><br><span class="line">Copying debug output to gdb.txt.</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b hello</span></span><br><span class="line">Breakpoint 2 at 0x555555555189: file start1.c, line 3.</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">r</span></span><br><span class="line">Starting program: /home/Mo01iHt/Desktop/a.out </span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at start1.c:13</span><br><span class="line">13		hello();</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line"></span><br><span class="line">Breakpoint 2, hello () at start1.c:3</span><br><span class="line">3	void hello()&#123;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">4		printf(&quot;hello echo~\n&quot;);</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">hello echo~</span><br><span class="line">5	&#125;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">main () at start1.c:14</span><br><span class="line">14		return 0;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">15	&#125;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">__libc_start_main (main=0x5555555551a0 &lt;main&gt;, argc=1, argv=0x7fffffffdf58, init=&lt;optimized out&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffdf48) at ../csu/libc-start.c:342</span><br><span class="line">342	../csu/libc-start.c: No such file or directory.</span><br></pre></td></tr></table></figure>
<p>退出后在终端ll查看：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll</span></span><br><span class="line">total 28</span><br><span class="line">-rwxrwxr-x  1 Mo01iHt Mo01iHt  16824 11月 22 00:06 a.out*</span><br><span class="line">-rw-rw-r--  1 Mo01iHt Mo01iHt    25268 11月 22 00:01 gdb.txt</span><br><span class="line">-rw-rw-r--  1 Mo01iHt Mo01iHt      181 11月 21 23:41 start1.c</span><br><span class="line">-rw-rw-r--  1 Mo01iHt Mo01iHt      128 11月 21 22:18 start.c</span><br></pre></td></tr></table></figure>
<p>可以看到生成了一个叫做gdb.txt的文件。vim进来看看：</p>
<p><del>算了懒得搬了。</del></p>
<h3 id="观察点watchpoints-捕捉点catchpoints">观察点watchpoints &amp;
捕捉点catchpoints</h3>
<p>啥，除了berakpoints还有watchpoints和catchpoints？？</p>
<p><img src="/article/b0d9110f/img2.png" alt="Breakpoints, watchpoints and catchpoints"></p>
<h4 id="插个眼-watch">插个眼: watch</h4>
<p>watchpoints的主要用途就是在动态调试过程中观察变量的变化。</p>
<p>如若给变量 i 插眼：</p>
<p>记录下变量 i 地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">list</span></span><br><span class="line">1	#include &lt;stdio.h&gt;</span><br><span class="line">2	</span><br><span class="line">3	void hello()&#123;</span><br><span class="line">4		printf(&quot;hello echo~\n&quot;);</span><br><span class="line">5	&#125;</span><br><span class="line">6	</span><br><span class="line">7	int main()&#123;</span><br><span class="line">8		int arr[4] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">9		for (int i=0;i&lt;4;i++)</span><br><span class="line">10		&#123;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">b 9</span></span><br><span class="line">Breakpoint 1 at 0x11d7: file start1.c, line 9.</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">r</span></span><br><span class="line">Starting program: /home/Mo01iHt/Desktop/a.out </span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at start1.c:9</span><br><span class="line">9		for (int i=0;i&lt;4;i++)</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p &amp;i</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">1 = (int *) 0x7fffffffde3c</span></span><br></pre></td></tr></table></figure>
<p>插个眼<code>watch *0x7fffffffde3c</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">watch *0x7fffffffde3c</span></span><br><span class="line">Hardware watchpoint 2: *0x7fffffffde3c</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">info watchpoints</span></span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">2       hw watchpoint  keep y                      *0x7fffffffde3c</span><br></pre></td></tr></table></figure>
<p>（可利用<code>info watchpoints</code>查看插眼史</p>
<p>然后在接下来n单步调试可以看到watchpoints的变化：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line"></span><br><span class="line">Hardware watchpoint 2: *0x7fffffffde3c</span><br><span class="line"></span><br><span class="line">Old value = 21845</span><br><span class="line">New value = 0</span><br><span class="line">main () at start1.c:9</span><br><span class="line">9		for (int i=0;i&lt;4;i++)</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">11			printf(&quot;%d\n&quot;, arr[i]);</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">1</span><br><span class="line">9		for (int i=0;i&lt;4;i++)</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line"></span><br><span class="line">Hardware watchpoint 2: *0x7fffffffde3c</span><br><span class="line"></span><br><span class="line">Old value = 0</span><br><span class="line">New value = 1</span><br><span class="line">0x0000555555555200 in main () at start1.c:9</span><br><span class="line">9		for (int i=0;i&lt;4;i++)</span><br></pre></td></tr></table></figure>
<p>在变量的值变化时，会触发<code>Hardware watchpoint x: *0x0123456789ab</code>，并会显示出old
value与new value，便于对照。</p>
<h3 id="禁用或启动断点断点清除">禁用或启动断点、断点清除</h3>
<p>有些断点暂时不想使用，但又不想删除，可以暂时禁用或启用。例如：</p>
<p><code>disable  #禁用所有断点</code></p>
<p><code>disable bnum #禁用标号为bnum的断点</code></p>
<p><code>enable  #启用所有断点</code></p>
<p><code>enable bnum #启用标号为bnum的断点</code></p>
<p><code>enable delete bnum  #启动标号为bnum的断点，并且在此之后删除该断点</code></p>
<p>断点清除主要用到clear和delete命令。常见使用如下：</p>
<p><code>clear   #删除当前行所有breakpoints</code></p>
<p><code>clear function  #删除函数名为function处的断点</code></p>
<p><code>clear filename:function #删除文件filename中函数function处的断点</code></p>
<p><code>clear lineNum #删除行号为lineNum处的断点</code></p>
<p><code>clear f:lename：lineNum #删除文件filename中行号为lineNum处的断点</code></p>
<p><code>delete  #删除所有breakpoints,watchpoints和catchpoints</code>
<code>delete bnum #删除断点号为bnum的断点</code></p>
<h3 id="按照特定格式打印变量">按照特定格式打印变量</h3>
<p>对于简单的数据，print默认的打印方式已经足够了，它会根据变量类型的格式打印出来，但是有时候这还不够，我们需要更多的格式控制。常见格式控制字符如下：</p>
<ul>
<li>x 按十六进制格式显示变量。</li>
<li>d 按十进制格式显示变量。</li>
<li>u 按十六进制格式显示无符号整型。</li>
<li>o 按八进制格式显示变量。</li>
<li>t 按二进制格式显示变量。</li>
<li>a 按十六进制格式显示变量。</li>
<li>c 按字符格式显示变量。</li>
<li>f 按浮点数格式显示变量。</li>
</ul>
<p>还是以辅助程序来说明，正常方式打印字符数组c：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p c</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">1 = <span class="string">&quot;hello&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>但是如果我们要查看它的十六进制格式打印呢？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p/x c</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">2 = &#123;0x68, 0x65, 0x6c, 0x6c, 0x6f&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="查看内存内容">查看内存内容</h3>
<p>examine(简写为x)可以用来查看内存地址中的值。语法如下：</p>
<p><code>x/[n][f][u] addr</code></p>
<p>其中：</p>
<ul>
<li>n 表示要显示的内存单元数，默认值为1</li>
<li>f 表示要打印的格式，前面已经提到了格式控制字符</li>
<li>u 要打印的单元长度</li>
<li>addr 内存地址</li>
</ul>
<p>单元类型常见有如下：</p>
<ul>
<li>b 字节</li>
<li>h 半字，即双字节</li>
<li>w 字，即四字节</li>
<li>g 八字节</li>
</ul>
<p>我们通过一个实例来看，假如我们要把float变量e按照二进制方式打印，并且打印单位是一字节：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">x/4tb &amp;e</span></span><br><span class="line">0x7fffffffdbd4:    00000000    00000000    00001000    01000001</span><br></pre></td></tr></table></figure>
<p>可以看到，变量e的四个字节都以二进制的方式打印出来了。</p>
<h3 id="自动显示变量内容">自动显示变量内容</h3>
<p>假设我们希望程序断住时，就显示某个变量的值，可以使用display命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">display e</span></span><br><span class="line">1: e = 8.5</span><br></pre></td></tr></table></figure>
<p>那么每次程序断住时，就会打印e的值。要查看哪些变量被设置了display，可以使用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">into display</span></span><br><span class="line">Auto-display expressions now in effect:</span><br><span class="line">Num Enb Expression</span><br><span class="line">1:   y  b</span><br><span class="line">2:   y  e</span><br></pre></td></tr></table></figure>
<p>如果想要清除可以使用</p>
<p><code>delete display num #num为前面变量前的编号,不带num时清除所有。</code></p>
<p>或者去使能：</p>
<p><code>disable display num  #num为前面变量前的编号，不带num时去使能所有</code></p>
<h3 id="查看寄存器内容">查看寄存器内容</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">info registers</span></span><br><span class="line">rax            0x0    0</span><br><span class="line">rbx            0x0    0</span><br><span class="line">rcx            0x7ffff7dd1b00    140737351850752</span><br><span class="line">rdx            0x0    0</span><br><span class="line">rsi            0x7ffff7dd1b30    140737351850800</span><br><span class="line">rdi            0xffffffff    4294967295</span><br><span class="line">rbp            0x7fffffffdc10    0x7fffffffdc10</span><br><span class="line">(内容过多未显示完全)</span><br></pre></td></tr></table></figure>
<h2 id="调试core文件">调试core文件</h2>
<p>前述是针对a.out是调试一个binary文件，</p>
<p>下述调试宕掉的程序。</p>
<p>写一个error.c：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span>* temp = <span class="literal">NULL</span>;</span><br><span class="line">        *temp = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>显然给一个空指针赋值，会触发段错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gcc -g error.c</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./a.out</span></span><br><span class="line">Segmentation fault (core dumped)</span><br></pre></td></tr></table></figure>
<p>对于出现内存越界错误的程序，我们通常会查看生成的core文件来进行进一步分析。</p>
<p>这里提到了一个core文件，那么：</p>
<h3 id="什么是core文件"><font size="5"><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_15821487/article/details/121132724">什么是core文件？</a></font></h3>
<p>core是unix系统的内核，或者说是内存的映像。当程序出现内存越界的时候，操作系统会中止你的进程，并将当前内存状态倒出到core文件中，以便进一步分析。</p>
<p>inux系统下执行代码，不能正常运行，程序会core，或者直接离开，不会core。
bug和操作系统或硬件的保护机制都会导致程序异常终止，操作系统会kill掉这些进程并产生core文件。程序员可以通过core文件来找出问题所在。
它记录了程序挂掉时详细的状态描述。</p>
<p>开发和使用 Unix程序时, 有时程序莫名其妙的宕（down？）了,
却没有任何的提示（有时候会提示core dumped）。
这时候可以查看一下有没有形如core.进程号的文件生成，这个文件便是操作系统把程序宕掉时的内存内容扔出来生成的，它可以做为调试程序的参考。</p>
<h3 id="开启core-dump">开启core dump</h3>
<p>然而在Linux的默认限制中，core文件不会默认生成，需要手动修改资源设置的限制以开启core文件的生成(使用命令<code>ulimit -a</code>查看配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ulimit</span> -a</span></span><br><span class="line">core file size          (blocks, -c) 0</span><br><span class="line">data seg size           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) 15258</span><br><span class="line">max locked memory       (kbytes, -l) 65536</span><br><span class="line">max memory size         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) 1024</span><br><span class="line">pipe size            (512 bytes, -p) 8</span><br><span class="line">POSIX message queues     (bytes, -q) 819200</span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) 8192</span><br><span class="line">cpu time               (seconds, -t) unlimited</span><br><span class="line">max user processes              (-u) 15258</span><br><span class="line">virtual memory          (kbytes, -v) unlimited</span><br><span class="line">file locks                      (-x) unlimited</span><br></pre></td></tr></table></figure>
<p>(可以看到core file size
默认为0，即不会自动生成。使用指令<code>ulimit -c unlimited</code>开启</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ulimit</span> -c unlimited</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ulimit</span> -a</span></span><br><span class="line">core file size          (blocks, -c) unlimited</span><br><span class="line">data seg size           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) 15258</span><br><span class="line">max locked memory       (kbytes, -l) 65536</span><br><span class="line">max memory size         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) 1024</span><br><span class="line">pipe size            (512 bytes, -p) 8</span><br><span class="line">POSIX message queues     (bytes, -q) 819200</span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) 8192</span><br><span class="line">cpu time               (seconds, -t) unlimited</span><br><span class="line">max user processes              (-u) 15258</span><br><span class="line">virtual memory          (kbytes, -v) unlimited</span><br><span class="line">file locks                      (-x) unlimited</span><br></pre></td></tr></table></figure>
<p>设置好后再次运行可执行文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gcc -g error.c</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./a.out</span></span><br><span class="line">Segmentation fault (core dumped)</span><br></pre></td></tr></table></figure>
<p>显而易见，程序给你抛出了一个core（core dumped</p>
<p>(<font size="1">我在这里出现了个问题，在如上配置好之后仍然没有生成core文件，csdn了一下，找到解决方案：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zsiming/article/details/126734822">解决：Linux下C++段错误不产生core文件_zsiming的博客-CSDN博客</a><br>查看相关设置：<br><code>$ cat /proc/sys/kernel/core_pattern</code> <br><code>|/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E</code><br>就是说，文件的结果会被Linux的一个进程<code>apport</code>吞掉，拿去检查是不是系统的bug，所以看不到core文件了。<br>解决方法：<br><code>$ sudo service apport stop</code></font>)</p>
<p>ll一下可以看到同级目录下生成了一个core文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll</span></span><br><span class="line">total 1072</span><br><span class="line">-rwxrwxr-x  1 Mo01iHt Mo01iHt  18984 11月 22 22:57 a.out*</span><br><span class="line">-rw-------  1 Mo01iHt Mo01iHt 253952 11月 22 23:10 core</span><br><span class="line">-rw-rw-r--  1 Mo01iHt Mo01iHt     77 11月 22 22:35 error.c</span><br><span class="line">-rw-------  1 Mo01iHt Mo01iHt   1335 11月 22 22:30 .gdb_history</span><br><span class="line">-rw-rw-r--  1 Mo01iHt Mo01iHt  25268 11月 22 00:22 gdb.txt</span><br><span class="line">-rw-rw-r--  1 Mo01iHt Mo01iHt    181 11月 22 00:30 start1.c</span><br><span class="line">-rw-rw-r--  1 Mo01iHt Mo01iHt    128 11月 21 22:18 start.c</span><br></pre></td></tr></table></figure>
<h3 id="进入gdb调试">进入gdb调试</h3>
<p>带着core文件来gdb，执行命令<code>$ gdb a.out core</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gdb a.out core</span></span><br><span class="line">GNU gdb (Ubuntu 9.2-0ubuntu1~20.04.1) 9.2</span><br><span class="line">Copyright (C) 2020 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line">Type &quot;show copying&quot; and &quot;show warranty&quot; for details.</span><br><span class="line">This GDB was configured as &quot;x86_64-linux-gnu&quot;.</span><br><span class="line">Type &quot;show configuration&quot; for configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line"></span><br><span class="line">For help, type &quot;help&quot;.</span><br><span class="line">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...</span><br><span class="line">pwndbg: loaded 197 commands. Type pwndbg [filter] for a list.</span><br><span class="line">pwndbg: created $rebase, $ida gdb functions (can be used with print/break)</span><br><span class="line">Reading symbols from a.out...</span><br><span class="line">[New LWP 173306]</span><br><span class="line">Core was generated by `./a.out&#x27;.</span><br><span class="line">Program terminated with signal SIGSEGV, Segmentation fault.</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0  0x000056088e42013d <span class="keyword">in</span> main () at error.c:5</span></span><br><span class="line">5		*temp = 10;</span><br><span class="line">Exception occurred: Error: maximum recursion depth exceeded in comparison (&lt;class &#x27;RecursionError&#x27;&gt;)</span><br><span class="line">For more info invoke `set exception-verbose on` and rerun the command</span><br><span class="line">or debug it by yourself with `set exception-debugger on`</span><br><span class="line">Python Exception &lt;class &#x27;RecursionError&#x27;&gt; maximum recursion depth exceeded in comparison: </span><br></pre></td></tr></table></figure>
<p>gdb启动是真的罗里吧嗦啊）</p>
<p>可以看到带着core文件进入到gdb里会直接爆出fault以及产生抛出错误的代码行。</p>
<h2 id="调试一个正在运行的文件">调试一个正在运行的文件</h2>
<p>先写一个程序start2.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">        i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(;;)&#123;</span><br><span class="line">                test();</span><br><span class="line">                test1();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个程序程序无限循环并一直call给函数test()和test1()，但过程中i一直自加。</p>
<p>gcc编译之后让他挂到后台运行（<code>./a.out &amp;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gcc -g start2.c</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./a.out &amp;</span></span><br><span class="line">[1] 7514</span><br></pre></td></tr></table></figure>
<p>给我们抛了一个pid（进程识别号）：7514</p>
<p>pid进程还可以通过ps命令<code>$ ps -ef|grep 进程名</code>或者<code>$ pidof 进程名</code>找到：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ps -ef|grep ./a.out</span></span><br><span class="line">Mo01iHt    4548    4176 71 00:04 pts/0    00:30:16 ./a.out</span><br><span class="line">Mo01iHt    7514    4176 19 00:17 pts/0    00:05:46 ./a.out</span><br><span class="line">Mo01iHt   14018    4176  0 00:46 pts/0    00:00:00 grep --color=auto ./a.out</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pidof ./a.out</span></span><br><span class="line">7514 4548</span><br></pre></td></tr></table></figure>
<p>那么怎么利用pid通过gdb调试一个正在运行的gdb呢？</p>
<p>man一下gdb（<code>$ man gdb</code>：</p>
<ul>
<li><p>You can run "gdb" with no arguments or options; but the most
usual way to start GDB is with one argument or two, specifying an
executable program as the argument:</p>
<p><code>gdb program</code></p></li>
<li><p>You can also start with both an executable program and a core
file specified:</p>
<p><code>gdb program core</code></p></li>
<li><p>You can, instead, specify a process ID as a second argument or
use option "-p", if you want to debug a running process:</p>
<p><code>gdb program 1234</code></p>
<p><code>gdb -p 1234</code></p>
<p>would attach GDB to process 1234. With option -p you can omit the
program filename.</p></li>
</ul>
<p>于是乎<code>$ gdb -p 7514</code></p>
<p>或者</p>
<p><code>$ gdb</code></p>
<p><code>pwndgb&gt; attach pid</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gdb -p 7514</span></span><br><span class="line">GNU gdb (Ubuntu 9.2-0ubuntu1~20.04.1) 9.2</span><br><span class="line">Copyright (C) 2020 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line">Type &quot;show copying&quot; and &quot;show warranty&quot; for details.</span><br><span class="line">This GDB was configured as &quot;x86_64-linux-gnu&quot;.</span><br><span class="line">Type &quot;show configuration&quot; for configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line"></span><br><span class="line">For help, type &quot;help&quot;.</span><br><span class="line">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;.</span><br><span class="line">pwndbg: loaded 197 commands. Type pwndbg [filter] for a list.</span><br><span class="line">pwndbg: created $rebase, $ida gdb functions (can be used with print/break)</span><br><span class="line">Attaching to process 7514</span><br><span class="line">Reading symbols from /home/Mo01iHt/Desktop/a.out...</span><br><span class="line">Reading symbols from /lib/x86_64-linux-gnu/libc.so.6...</span><br><span class="line">Reading symbols from /usr/lib/debug/.build-id/18/78e6b475720c7c51969e69ab2d276fae6d1dee.debug...</span><br><span class="line">Reading symbols from /lib64/ld-linux-x86-64.so.2...</span><br><span class="line">Reading symbols from /usr/lib/debug/.build-id/45/87364908de169dec62ffa538170118c1c3a078.debug...</span><br><span class="line">0x0000559272c30133 in test () at start2.c:4</span><br><span class="line">4	&#125;</span><br><span class="line">LEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA</span><br><span class="line">─────────────────────────────────[ REGISTERS ]─────────────────────────────────</span><br><span class="line"> RAX  0x0</span><br><span class="line"> RBX  0x559272c30170 (__libc_csu_init) ◂— endbr64 </span><br><span class="line"> RCX  0x559272c30170 (__libc_csu_init) ◂— endbr64 </span><br><span class="line"> RDX  0x7ffd166c9ea8 —▸ 0x7ffd166cb33e ◂— &#x27;SHELL=/bin/bash&#x27;</span><br><span class="line"> RDI  0x1</span><br><span class="line"> RSI  0x7ffd166c9e98 —▸ 0x7ffd166cb336 ◂— 0x74756f2e612f2e /* &#x27;./a.out&#x27; */</span><br><span class="line"> R8   0x0</span><br><span class="line"> R9   0x7f7f22a4ed60 (_dl_fini) ◂— endbr64 </span><br><span class="line"> R10  0x0</span><br><span class="line"> R11  0x7f7f229e07c0 (intel_02_known) ◂— 0x200000200406</span><br><span class="line"> R12  0x559272c30040 (_start) ◂— endbr64 </span><br><span class="line"> R13  0x7ffd166c9e90 ◂— 0x1</span><br><span class="line"> R14  0x0</span><br><span class="line"> R15  0x0</span><br><span class="line"> RBP  0x7ffd166c9da0 ◂— 0x0</span><br><span class="line"> RSP  0x7ffd166c9d98 —▸ 0x559272c3015c (main+18) ◂— mov    eax, 0</span><br><span class="line"> RIP  0x559272c30133 (test+10) ◂— ret    </span><br><span class="line">──────────────────────────────────[ DISASM ]───────────────────────────────────</span><br><span class="line"> ► 0x559272c30133 &lt;test+10&gt;               ret                                  &lt;0x559272c3015c; main+18&gt;</span><br><span class="line">    ↓</span><br><span class="line">   0x559272c3015c &lt;main+18&gt;               mov    eax, 0</span><br><span class="line">   0x559272c30161 &lt;main+23&gt;               call   test1                &lt;test1&gt;</span><br><span class="line"> </span><br><span class="line">   0x559272c30166 &lt;main+28&gt;               jmp    main+8                &lt;main+8&gt;</span><br><span class="line"> </span><br><span class="line">   0x559272c30168                         nop    dword ptr [rax + rax]</span><br><span class="line">   0x559272c30170 &lt;__libc_csu_init&gt;       endbr64 </span><br><span class="line">   0x559272c30174 &lt;__libc_csu_init+4&gt;     push   r15</span><br><span class="line">   0x559272c30176 &lt;__libc_csu_init+6&gt;     lea    r15, [rip + 0x2c73]           &lt;0x559272c32df0&gt;</span><br><span class="line">   0x559272c3017d &lt;__libc_csu_init+13&gt;    push   r14</span><br><span class="line">   0x559272c3017f &lt;__libc_csu_init+15&gt;    mov    r14, rdx</span><br><span class="line">   0x559272c30182 &lt;__libc_csu_init+18&gt;    push   r13</span><br><span class="line">───────────────────────────────[ SOURCE (CODE) ]───────────────────────────────</span><br><span class="line">In file: /home/Mo01iHt/Desktop/start2.c</span><br><span class="line">   1 #include &lt;stdio.h&gt;</span><br><span class="line">   2 </span><br><span class="line">   3 void test()&#123;</span><br><span class="line"> ► 4 &#125;</span><br><span class="line">   5 </span><br><span class="line">   6 void test1()&#123;</span><br><span class="line">   7 	int i = 0;</span><br><span class="line">   8 	i++;</span><br><span class="line">   9 &#125;</span><br><span class="line">───────────────────────────────────[ STACK ]───────────────────────────────────</span><br><span class="line">00:0000│ rsp 0x7ffd166c9d98 —▸ 0x559272c3015c (main+18) ◂— mov    eax, 0</span><br><span class="line">01:0008│ rbp 0x7ffd166c9da0 ◂— 0x0</span><br><span class="line">02:0010│     0x7ffd166c9da8 —▸ 0x7f7f22855083 (__libc_start_main+243) ◂— mov    edi, eax</span><br><span class="line">03:0018│     0x7ffd166c9db0 —▸ 0x7f7f22a6a620 (_rtld_global_ro) ◂— 0x50f4000000000</span><br><span class="line">04:0020│     0x7ffd166c9db8 —▸ 0x7ffd166c9e98 —▸ 0x7ffd166cb336 ◂— 0x74756f2e612f2e /* &#x27;./a.out&#x27; */</span><br><span class="line">05:0028│     0x7ffd166c9dc0 ◂— 0x100000000</span><br><span class="line">06:0030│     0x7ffd166c9dc8 —▸ 0x559272c3014a (main) ◂— endbr64 </span><br><span class="line">07:0038│     0x7ffd166c9dd0 —▸ 0x559272c30170 (__libc_csu_init) ◂— endbr64 </span><br><span class="line">─────────────────────────────────[ BACKTRACE ]─────────────────────────────────</span><br><span class="line"> ► f 0   0x559272c30133 test+10</span><br><span class="line">   f 1   0x559272c3015c main+18</span><br><span class="line">   f 2   0x7f7f22855083 __libc_start_main+243</span><br><span class="line">───────────────────────────────────────────────────────────────────────────────</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可以看到进程执行到test()处。</p>
<p>(<font size="1">很难受的是我在这里又寄乐，报错如下：<code>Could not attach to process.  If your uid matches the uid of the target process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try again as the root user.  For more details, see /etc/sysctl.d/10-ptrace.conf ptrace: Operation not permitted.</code>，cn一下：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/longyuan-z/p/7787860.html">使用GDB调试时attach
ID不被允许 - longyuan-z - 博客园
(cnblogs.com)</a><br><code>$ cat  /etc/sysctl.d/10-ptrace.conf</code>查看配置文件。最后一行默认是<code>kernel.yama.ptrace_scope = 1</code>，这个值不允许用户使用普通账户使用attach
ID连接程序进行调试，需要使用超级用户权限才能连接。<br>解决方法：<code>sudo vim /etc/sysctl.d/10-ptrace.conf</code>将最后一行改为
<code>kernel.yama.ptrace_scope = 0</code>，保存退出。重启系统后，普通用户就可以使用attach
ID连接程序调试了。</font>)</p>
<p>简单调试观察一下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">main () at start2.c:13</span><br><span class="line">13			test1();</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">s</span></span><br><span class="line">test1 () at start2.c:6</span><br><span class="line">6	void test1()&#123;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">7		int i = 0;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">8		i++;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p i</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">1 = 0</span></span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">9	&#125;</span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">p i</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">2 = 1</span></span><br><span class="line"><span class="meta prompt_">pwndbg&gt; </span><span class="language-bash">n</span></span><br><span class="line">main () at start2.c:12</span><br><span class="line">12			test();</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://blog.mo01iht.top">Mo01iHt</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.mo01iht.top/article/b0d9110f/">https://blog.mo01iht.top/article/b0d9110f/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.mo01iht.top" target="_blank">小二上馄饨的Mo01iHt-Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/tools/">tools</a></div><div class="post_share"><div class="social-share" data-image="https://files.catbox.moe/ij1edm.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/article/87c239f0/"><img class="prev-cover" src="https://pic2.zhimg.com/80/v2-f8552a32367a64583c5bfd15582e8f71_720w.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">[文献阅读]基于特征重要性感知攻击的可迁移对抗攻击-FIA</div></div></a></div><div class="next-post pull-right"><a href="/article/b2365084/"><img class="next-cover" src="https://img1.baidu.com/it/u=3452659010,4253121699&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1422&amp;h=800" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">[网络攻防]HackerGame初体验-来点免费送的flag</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="http://image-host-mooliht.oss-cn-beijing.aliyuncs.com/img/image-20230611192757440.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Mo01iHt</div><div class="author-info__description">我闭上眼睛触摸星空，阅读宇宙留给我的盲文。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Mo01iHt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Mo01iHt" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:haowenxuan@stu.ouc.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/30342658" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://www.zhihu.com/people/hun-tun-31" target="_blank" title="Zhihu"><i class="fa-brands fa-zhihu"></i></a><a class="social-icon" href="https://leetcode.cn/u/huntun-hwx/" target="_blank" title="LeetCode"><i class="fa-solid fa-code"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is Mo01iHt's blog! / C'est le blog de Mo01iHt! / 这是馄饨的博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#pwndbggdb"><span class="toc-number">1.</span> <span class="toc-text">pwndbg(GDB)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gdb%E7%AE%80%E8%AE%B0"><span class="toc-number">1.1.</span> <span class="toc-text">gdb简记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%80%81%E9%97%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">传送门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%95%A5%E6%98%AF%E4%B8%AAgdb"><span class="toc-number">1.1.2.</span> <span class="toc-text">啥是个gdb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%92%8B%E9%85%8D%E7%BD%AEgdb"><span class="toc-number">1.1.3.</span> <span class="toc-text">咋配置gdb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-number">1.1.4.</span> <span class="toc-text">说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quickstart"><span class="toc-number">1.2.</span> <span class="toc-text">quickstart</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gdb%E6%8C%87%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">gdb指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B7%E4%BA%BA%E4%B8%80%E4%B8%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">男人一下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%E5%BA%94%E7%94%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">基本命令应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#rrun-%E6%B6%A6"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">r&#x2F;run: 润</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bbreak-%E6%89%93%E6%96%AD%E7%82%B9"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">b&#x2F;break: 打断点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E5%87%BD%E6%95%B0%E5%90%8D%E5%AD%97"><span class="toc-number">1.3.2.2.1.</span> <span class="toc-text">b 函数名字</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E8%A1%8C%E5%8F%B7"><span class="toc-number">1.3.2.2.2.</span> <span class="toc-text">b 行号</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#info-b-%E5%BA%B7%E5%BA%B7%E5%88%9A%E5%9C%A8%E5%93%AA%E8%A3%85%E4%BA%86b"><span class="toc-number">1.3.2.2.3.</span> <span class="toc-text">info b:
康康刚在哪装了b</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nnext-%E5%8D%95%E6%AD%A5%E8%BF%90%E8%A1%8C"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">n&#x2F;next: 单步运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pprint-%E6%89%93%E5%8D%B0%E5%8F%98%E9%87%8F%E5%80%BC"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">p&#x2F;print: 打印变量值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#no-symbol-xxx-in-current-context-%E7%9A%84%E8%A7%A3%E5%86%B3"><span class="toc-number">1.3.2.4.1.</span> <span class="toc-text">No symbol &quot;xxx&quot; in
current context 的解决</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sstep-%E6%AD%A5%E5%85%A5%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">s&#x2F;step: 步入函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ccontinue-%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C%E5%88%B0%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%96%AD%E7%82%B9"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">c&#x2F;continue:
继续执行到下一个断点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uuntil-%E7%BB%A7%E7%BB%AD%E8%BF%90%E8%A1%8C%E5%88%B0%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.3.2.7.</span> <span class="toc-text">u&#x2F;until: 继续运行到指定位置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gdb%E4%B8%80%E4%BA%9B%E9%AA%9A%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.</span> <span class="toc-text">gdb一些骚操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%81%E8%AE%B8%E6%89%A7%E8%A1%8C%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4-shell-xxx"><span class="toc-number">1.4.1.</span> <span class="toc-text">允许执行终端命令: shell xxx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%8A%9F%E8%83%BD-set-logging-on"><span class="toc-number">1.4.2.</span> <span class="toc-text">日志功能: set logging on</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E7%82%B9watchpoints-%E6%8D%95%E6%8D%89%E7%82%B9catchpoints"><span class="toc-number">1.4.3.</span> <span class="toc-text">观察点watchpoints &amp;
捕捉点catchpoints</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%B8%AA%E7%9C%BC-watch"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">插个眼: watch</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A6%81%E7%94%A8%E6%88%96%E5%90%AF%E5%8A%A8%E6%96%AD%E7%82%B9%E6%96%AD%E7%82%B9%E6%B8%85%E9%99%A4"><span class="toc-number">1.4.4.</span> <span class="toc-text">禁用或启动断点、断点清除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%89%B9%E5%AE%9A%E6%A0%BC%E5%BC%8F%E6%89%93%E5%8D%B0%E5%8F%98%E9%87%8F"><span class="toc-number">1.4.5.</span> <span class="toc-text">按照特定格式打印变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%86%85%E5%AD%98%E5%86%85%E5%AE%B9"><span class="toc-number">1.4.6.</span> <span class="toc-text">查看内存内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%98%BE%E7%A4%BA%E5%8F%98%E9%87%8F%E5%86%85%E5%AE%B9"><span class="toc-number">1.4.7.</span> <span class="toc-text">自动显示变量内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AF%84%E5%AD%98%E5%99%A8%E5%86%85%E5%AE%B9"><span class="toc-number">1.4.8.</span> <span class="toc-text">查看寄存器内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E8%AF%95core%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.</span> <span class="toc-text">调试core文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFcore%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">什么是core文件？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AFcore-dump"><span class="toc-number">1.5.2.</span> <span class="toc-text">开启core dump</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5gdb%E8%B0%83%E8%AF%95"><span class="toc-number">1.5.3.</span> <span class="toc-text">进入gdb调试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E4%B8%80%E4%B8%AA%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.6.</span> <span class="toc-text">调试一个正在运行的文件</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/article/14bdc2a2/" title="[文献阅读]并行矩形翻转攻击PRFA-针对目标检测的基于查询的黑盒攻击"><img src="http://image-host-mooliht.oss-cn-beijing.aliyuncs.com/img/image-20230808123134010.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[文献阅读]并行矩形翻转攻击PRFA-针对目标检测的基于查询的黑盒攻击"/></a><div class="content"><a class="title" href="/article/14bdc2a2/" title="[文献阅读]并行矩形翻转攻击PRFA-针对目标检测的基于查询的黑盒攻击">[文献阅读]并行矩形翻转攻击PRFA-针对目标检测的基于查询的黑盒攻击</a><time datetime="2023-08-08T03:55:42.000Z" title="发表于 2023-08-08 11:55:42">2023-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/33812311/" title="[文献阅读]SiblingAttack-针对面部识别的可迁移对抗攻击的再思考"><img src="http://image-host-mooliht.oss-cn-beijing.aliyuncs.com/img/v2-08e9a639c781d46f12fe7ca7aaca727c_720w.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[文献阅读]SiblingAttack-针对面部识别的可迁移对抗攻击的再思考"/></a><div class="content"><a class="title" href="/article/33812311/" title="[文献阅读]SiblingAttack-针对面部识别的可迁移对抗攻击的再思考">[文献阅读]SiblingAttack-针对面部识别的可迁移对抗攻击的再思考</a><time datetime="2023-07-27T03:04:53.000Z" title="发表于 2023-07-27 11:04:53">2023-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/58d0d04f/" title="[文献阅读]通过对抗统计一致性规避深度伪造检测器-StatAttack"><img src="http://image-host-mooliht.oss-cn-beijing.aliyuncs.com/img/image-20230528150652373.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[文献阅读]通过对抗统计一致性规避深度伪造检测器-StatAttack"/></a><div class="content"><a class="title" href="/article/58d0d04f/" title="[文献阅读]通过对抗统计一致性规避深度伪造检测器-StatAttack">[文献阅读]通过对抗统计一致性规避深度伪造检测器-StatAttack</a><time datetime="2023-05-28T05:40:31.000Z" title="发表于 2023-05-28 13:40:31">2023-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/87c239f0/" title="[文献阅读]基于特征重要性感知攻击的可迁移对抗攻击-FIA"><img src="https://pic2.zhimg.com/80/v2-f8552a32367a64583c5bfd15582e8f71_720w.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[文献阅读]基于特征重要性感知攻击的可迁移对抗攻击-FIA"/></a><div class="content"><a class="title" href="/article/87c239f0/" title="[文献阅读]基于特征重要性感知攻击的可迁移对抗攻击-FIA">[文献阅读]基于特征重要性感知攻击的可迁移对抗攻击-FIA</a><time datetime="2023-05-27T14:41:06.000Z" title="发表于 2023-05-27 22:41:06">2023-05-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/article/b0d9110f/" title="[计算机基础]ban门弄fool-一些常用的工具"><img src="https://files.catbox.moe/ij1edm.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="[计算机基础]ban门弄fool-一些常用的工具"/></a><div class="content"><a class="title" href="/article/b0d9110f/" title="[计算机基础]ban门弄fool-一些常用的工具">[计算机基础]ban门弄fool-一些常用的工具</a><time datetime="2022-11-21T03:01:03.000Z" title="发表于 2022-11-21 11:01:03">2022-11-21</time></div></div></div></div></div></div></main><footer id="footer" style="background: #a4c7fd"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Mo01iHt</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">蒙ICP备2023002272号-1</a></br>乱把白云揉碎。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '5321a08c15d363f82de6',
      clientSecret: '981a3039c915214c7afa39d58a4924c3c8336170',
      repo: 'Mo01iHt.github.io',
      owner: 'Mo01iHt',
      admin: ['Mo01iHt'],
      id: '903dc97bf1b4d75ddf8dc1388a7e606e',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>